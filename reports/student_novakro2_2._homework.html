<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0084)https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=export_xhtml -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <title>student:novakro2:2._homework</title>
<meta name="generator" content="DokuWiki snapshot? unknown">
<meta name="robots" content="index,follow">
<meta name="date" content="2015-11-07T19:52:01+0100">
<meta name="keywords" content="student,novakro2,2._homework">
<link rel="search" type="application/opensearchdescription+xml" href="https://edux.fit.cvut.cz/courses/MI-PAA/lib/exe/opensearch.php" title="MI-PAA Problémy a algoritmy">
<link rel="start" href="https://edux.fit.cvut.cz/courses/MI-PAA/">
<link rel="contents" href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=index" title="Index">
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="https://edux.fit.cvut.cz/courses/MI-PAA/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="https://edux.fit.cvut.cz/courses/MI-PAA/feed.php?mode=list&amp;ns=student:novakro2">
<link rel="alternate" type="text/html" title="Plain HTML" href="https://edux.fit.cvut.cz/courses/MI-PAA/_export/xhtml/student/novakro2/2._homework">
<link rel="canonical" href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework">
<link rel="stylesheet" media="all" type="text/css" href="./student_novakro2_2._homework_files/css.php">
<link rel="stylesheet" media="screen" type="text/css" href="./student_novakro2_2._homework_files/css(1).php">
<link rel="stylesheet" media="print" type="text/css" href="./student_novakro2_2._homework_files/css(2).php">
<script type="text/javascript" charset="utf-8"><!--//--><![CDATA[//><!--
var NS='student:novakro2';var SIG=' --- //[[novakro2@fit.cvut.cz|Bc. Rostislav Novák]] 2016/01/31 17:54//';var JSINFO = {"id":"student:novakro2:2._homework","namespace":"student:novakro2"};
//--><!]]></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/js.php"></script>
<script type="text/x-mathjax-config;executed=true" charset="utf-8"><!--//--><![CDATA[//><!--
//MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
//MathJax.Hub.Config({  TeX: { equationNumbers: {autoNumber: "all"} } });
MathJax.Hub.Config({
	tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
	TeX: { 
		equationNumbers: {autoNumber: "AMS"},
		extensions: ["AMSmath.js", "AMSsymbols.js"]
	} 
});

//--><!]]></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/MathJax.js"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/usrmenu.js"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/indexmenu.js"></script>
<script type="text/javascript" charset="utf-8"><!--//--><![CDATA[//><!--
var indexmenu_ID='student/novakro2/2._homework'
//--><!]]></script>
<script type="text/javascript" charset="utf-8"><!--//--><![CDATA[//><!--
jQuery.noConflict();

//--><!]]></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/jsapi"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/results.js"></script><script src="./student_novakro2_2._homework_files/saved_resource" type="text/javascript"></script><link href="./student_novakro2_2._homework_files/ui+cs.css" type="text/css" rel="stylesheet"><script src="./student_novakro2_2._homework_files/format+cs,default+cs,ui+cs,corechart+cs.I.js" type="text/javascript"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/anketa.js"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/voting.js"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/editing_template.js"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/addCols.js"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/manageEdit.js"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/toggleTabIndex.js"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/toggleTabs.js"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/jquery.floatThead.js"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/stickyHeader.js"></script>
<script type="text/javascript" charset="utf-8" src="./student_novakro2_2._homework_files/harmonogram.js"></script>
<style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body><div id="MathJax_Message" style="display: none;"></div>
<div class="dokuwiki export">
<!-- TOC START -->
<div class="toc">
<div class="tocheader toctoggle" id="toc__header" style="cursor: pointer;"><span id="toc__toggle" class="toc_close" style="cursor: pointer;"><span>−</span></span>Obsah</div>
<div id="toc__inside">

<ul class="toc">
<li class="level1"><div class="li"><span class="li"><a href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=export_xhtml#reseni_problemu_batohu_dynamickym_programovanim_metodou_vetvi_a_hranic_a_aproximativnim_algoritmem" class="toc">Řešení problému batohu dynamickým programováním, metodou větví a hranic a aproximativním algoritmem</a></span></div>
<ul class="toc">
<li class="level2"><div class="li"><span class="li"><a href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=export_xhtml#popis_implementovanych_metod" class="toc">Popis implementovaných metod</a></span></div>
<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=export_xhtml#metoda_vetvi_a_hranic_b_b" class="toc">Metoda větví a hranic (B&amp;B)</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=export_xhtml#metoda_dynamickeho_programovani" class="toc">Metoda dynamického programování</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=export_xhtml#fptas_algoritmus" class="toc">FPTAS algoritmus</a></span></div></li>
</ul>
</li>
<li class="level2"><div class="li"><span class="li"><a href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=export_xhtml#srovnani" class="toc">Srovnání</a></span></div>
<ul class="toc">
<li class="level3"><div class="li"><span class="li"><a href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=export_xhtml#srovnani_casu" class="toc">Srovnání času</a></span></div></li>
<li class="level3"><div class="li"><span class="li"><a href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=export_xhtml#fptas_a_epsilon" class="toc">FPTAS a epsilon</a></span></div></li>
</ul>
</li>
<li class="level2"><div class="li"><span class="li"><a href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=export_xhtml#zaver" class="toc">Závěr</a></span></div></li>
<li class="level2"><div class="li"><span class="li"><a href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/2._homework?do=export_xhtml#ostatni" class="toc">Ostatní</a></span></div></li></ul>
</li></ul>
</div>
</div>
<!-- TOC END -->



<h1><a name="reseni_problemu_batohu_dynamickym_programovanim_metodou_vetvi_a_hranic_a_aproximativnim_algoritmem" id="reseni_problemu_batohu_dynamickym_programovanim_metodou_vetvi_a_hranic_a_aproximativnim_algoritmem">Řešení problému batohu dynamickým programováním, metodou větví a hranic a aproximativním algoritmem</a></h1>
<div class="level1">

<p>

Opět bylo zadáním řešení problému batohu. Ale tentokrát řešit pomocí metody B&amp;B, dynamickým programováním a FPTAS algoritmu pro problém batohu. Více informací o problém batohu a algoritmů předtím jsou zde <a href="https://edux.fit.cvut.cz/courses/MI-PAA/student/novakro2/1._homework" class="wikilink1" title="student:novakro2:1._homework">Řešení problému batohu metodou hrubé síly a jednoduchou heuristikou</a>) a zde <a href="https://edux.fit.cvut.cz/courses/MI-PAA/tutorials/batoh" class="wikilink1" title="tutorials:batoh">Problém batohu (Knapsack Problem)</a>.
</p>

</div>
<!-- SECTION "Řešení problému batohu dynamickým programováním, metodou větví a hranic a aproximativním algoritmem" [1-414] -->
<h2><a name="popis_implementovanych_metod" id="popis_implementovanych_metod">Popis implementovaných metod</a></h2>
<div class="level2">

<p>

Postup řešení byl stejný jako předtím, jen jsem použil jiné implementace algoritmů.
</p>

</div>
<!-- SECTION "Popis implementovaných metod" [415-551] -->
<h3><a name="metoda_vetvi_a_hranic_b_b" id="metoda_vetvi_a_hranic_b_b">Metoda větví a hranic (B&amp;B)</a></h3>
<div class="level3">

<p>

Metoda větvení hranic je stejný algoritmus jako metoda hrubé síly jen s tou vyjímkou, že se stavový prostor ořezává dle omezujícího faktoru. Dle zadání měla tato metoda obsahovat ořezání shora i zdola. Na ořezání shora bylo použito kritérium kapacity batohu a na ořezání zdola kritérium horší ceny. (Řešení větve nemůže být lepší než aktuální cena.) Ale bohužel asymptotická složitost zůstává stejná O(2^n).
</p>

</div>

<h4><a name="popis_algoritmu" id="popis_algoritmu">Popis algoritmu</a></h4>
<div class="level4">
<pre class="code">// O jakých předmětech bylo rozhodnuto, určuje hloubka zanoření.
function solveByBAndB(List&lt;Pair&lt;int, int&gt;&gt; things, int depth, long combination, Pair&lt;int,int&gt; &amp; bestSolution, int max_depth, int max_capacity)
	
	// Spočte akutální hodnotu a váhu batohu
	weightAndValue = countWeightAndValue(things, combination)
	
	// Spočte možnou cenu větve
	// b_and_b_rest_count_value Spočte cenu nerozhodnutých věcí
	if_value = weightAndValue.value + b_and_b_rest_count_value(things, depth)
	
	// End of recursion or capacity was exceeded or branch value can not be better
	if depth &gt; max_depth || weightAndValue.second &gt; max_capacity || if_value &lt; bestSolution.value
		return
	end
	
	if weightAndValue.second &lt;= max_capacity &amp;&amp; weightAndValue.first &gt; bestSolution.value
		bestSolution.value = weightAndValue.value
		bestSolution.weight = weightAndValue.value
	end
	
	// nextCombination nastaví dle posledního argumentu, jestli věc byla přidána nebo ne
	solveByBAndB(things, depth+1, nextCombination(combination, depth, 0), bestSolution, max_depth, max_capacity)
	solveByBAndB(things, depth+1, nextCombination(combination, depth, 1), bestSolution, max_depth, max_capacity)
end</pre>

<p>

A pak je funkce volána tímto způsobem.

</p>
<pre class="code">	...
	solveByBAndB(things, 0, 0, bestSolution, things.size(), maxCapacity)
	
	return InstanceSolution(bestSolution.combination, bestSolution.value, bestSolution.weight)</pre>

</div>
<!-- SECTION "Metoda větví a hranic (B&B)" [552-2504] -->
<h3><a name="metoda_dynamickeho_programovani" id="metoda_dynamickeho_programovani">Metoda dynamického programování</a></h3>
<div class="level3">

<p>

Problém batohu lze také řešit pomocí dynamického programů a to dekompozicí podle celkové ceny nebo podle kapacity. V obou případech se postupuje skoro stejně. Já jsem si zvolil dekompozici podle celkové ceny.
</p>

<p>
V dekompozici podle celkové ceny v podstatě řešíme, v průběhu algoritmu, inverzní problém batohu, tj. hledáme pro zadanou cenu takovou kombinaci, že součet cen musí se rovnat ceně a součet vah musí být minimální. Celé postup algoritmu je definován těmito rovnicemi:

</p>
<pre class="code">W(0,0) = 0
W(0,c) = ∞ pro všechna c &gt; 0
W(i+1, c) = min(W(i, c), W(i, c-c_i+1)+w_i+1) pro všechna i &gt; 0.</pre>

<p>

Kde W(i, c) je sumární hmotnost věcí, c_i+1 a w_i+1 cena a hmotnost věci na indexu i+1. Pak z výsledných řešení W(n, c) vybereme řešení, pro které je W(n, c) &lt; M pro největší c.
</p>

<p>
Ve výpočtu hodnot tabulky lez pak postupovat rekurzivně (od shora) nebo dopředně vygenerovat všechny hodnoty tabulky od prvního prvku W(0,1) pro poslední prvek.
</p>

<p>
Řešení pomocí výpočtu tabulky od spodu.
</p>

</div>

<h4><a name="popis_algoritmu1" id="popis_algoritmu1">Popis algoritmu</a></h4>
<div class="level4">
<pre class="code">function solveByDynamicForward(InstanceProblem problem)
	things = ... // předáno z argumentu
	n = things.size + 1
	max_value = sum(things.value) + 1 // Součet cen všech věcí
	
	table[0][0] = 0
	table[0][c] = 0 // Pro všechny c
	for(int i = 0; i &lt; max_value; i++)
		for( int j = 1; j &lt; n; j++)
			table[j][i] = min(table[j-1][i], table[j-1][i] - things[j-1].value) + things[j-1].weight))
		end
	end
	
	for(int i = max_value-1; i &gt;= 0; i--)
		if table[n-1][i] &lt;= maxCapacity
			weight = table[n-1][i]
			value = i
			break
		end
	end
	
	return InstanceSolution(0, value, weight)
end</pre>

<p>
Řešení pomocí rekurze od shora.

</p>
<pre class="code">function solveByDynamicBackward(InstanceProblem problem)
	things = ... // předáno z argumentu
	n = things.size + 1
	max_value = sum(things.value) + 1 // Součet cen všech věcí
	
	table[0][0] = 0
	table[0][c] = 0 // Pro všechny c
	
	for(int i = max_value-1; i &gt;= 0; i--)
		weight = solve_by_dynamic_recursive_helper(n-1, i, things, table)
		if weight &lt;= maxCapacity
			value = i
			break
		end
	end
	
	return InstanceSolution(0, value, weight)
end</pre>
<pre class="code">function solve_by_dynamic_recursive_helper(int n, int value, List&lt;Pair&lt;int, int&gt;&gt; things, Table table) {
	if table[n][value] &lt; 0 // Nevypočítané hodnoty jsou inicializovány -1
		table[n][value] = min(
			solve_by_dynamic_recursive_helper(n-1, value, things, table ),
			solve_by_dynamic_recursive_helper(n-1, value - things[n-1].value, things, table) + things[n-1].weight )
		return table[n][value]
	end
	
	return table[n][value]
end</pre>

</div>
<!-- SECTION "Metoda dynamického programování" [2505-5186] -->
<h3><a name="fptas_algoritmus" id="fptas_algoritmus">FPTAS algoritmus</a></h3>
<div class="level3">

<p>

FPTAS algoritmus není nic jiného než upravení instance problému (přesněji cen věcí) a pak vyřešení pomocí dynamického programování dekompozicí podle ceny. Vstupem do tohoto algoritmu je navíc přesnost, kterou chceme, aby algoritmus dosáhl. Úprava instance je zadána dle následujících vzorců:

</p>
<pre class="code">0 &lt; epsilon &lt;= 1
C_max = max{c_1, c_2, ... c_n}
K = (epsilon * C_max) / n
c'_i = c_i / K, se spodním zaokrouhlením.</pre>

</div>

<h4><a name="popis_algoritmu2" id="popis_algoritmu2">Popis algoritmu</a></h4>
<div class="level4">
<pre class="code">function solveByFPTAS(InstanceProblem problem, double epsilon)
	things = // Předáno s argumentu
	
	int C_max = max(things).value
	double K = (epsilon * C_max) / things.size()
		
	// Vytvoří instanci problému a přidáme tam věci s novou cenou.
	InstanceProblem fptas_problem(problem.getCapacity())
	for(auto it = things.begin(); it != things.end(); ++it)
		fptas_problem.addThing(it-&gt;first/K, it-&gt;second)
	end
	
	// Použije metodu dynamického programování 
	return solveByDynamicForward(fptas_problem)
end</pre>

</div>
<!-- SECTION "FPTAS algoritmus" [5187-6213] -->
<h2><a name="srovnani" id="srovnani">Srovnání</a></h2>
<div class="level2">

</div>
<!-- SECTION "Srovnání" [6214-6237] -->
<h3><a name="srovnani_casu" id="srovnani_casu">Srovnání času</a></h3>
<div class="level3">

<p>

V tabulce vidíme srovnání výpočetního času všech algoritmů. Vidíme, že algoritmy dynamického programování jsou o dost rychlejší než Bruteforce nebou Bound and Branch. Pokud se podíváme, můžeme se zarazit proč Bound and Branch je pomalejší než klasický Brute force. Důvodem je, že Bruteforce v mém případě byl implementován nerekurzivně a B&amp;B byl implementován rekurzivně. Dalším důvodem je, že toto jsou průměrné časy a bohužel v testových datech byly instance, které obsahovali takovou konfiguraci, že algoritmus zkoušel všechny větve a těch to instancí bylo zhruba 2%. Tyto případy byly takové, kde cena a váha u všech věcí byla stejná. Z toho vyplývá, že u B&amp;B dost závisí na věcech, které chceme dát do batohu.
</p>

<p>
Všechny časy byly měřeny na Linux Ubuntu 15.04, implementační jazyk C++ 2011, virtualizace na 2 procesorech o taktu 2,2 <acronym title="Gigahertz">GHz</acronym>.
</p>

<p>
Následující tabulka znázorňuje výpočetní čas v závislosti na implementaci algoritmů. Uvedený čas je v ms.
</p>
<pre class="code">+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
|           n          |    4    |    10   |    20   |    22   |    25   |    27   |    30   |    32   |    35   |    37   |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| FPTAS epsilon(0,1)   | 0,00298 | 0,01698 | 0,11986 | 0,19166 | 0,33008 | 0,41142 | 0,59332 |  0,7016 | 0,91058 | 1,12132 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| FPTAS epsilon(0,2)   | 0,00208 | 0,00964 | 0,05994 | 0,08724 | 0,13138 | 0,17452 | 0,26774 | 0,34322 | 0,43232 | 0,52754 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| FPTAS epsilon(0,3)   | 0,00186 | 0,00674 | 0,04026 | 0,05858 |  0,0897 | 0,10576 | 0,16324 | 0,21004 | 0,29546 | 0,33998 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| FPTAS epsilon(0,4)   |  0,0016 | 0,00556 | 0,03292 |  0,0442 | 0,06912 |  0,0804 |  0,1144 | 0,14442 | 0,20568 | 0,24118 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| FPTAS epsilon(0,5)   | 0,00164 | 0,00508 | 0,02494 | 0,03488 | 0,05596 | 0,06826 |  0,0921 |  0,1183 | 0,15208 | 0,19408 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| FPTAS epsilon(0,6)   | 0,00148 |  0,0044 | 0,02126 | 0,02934 | 0,04516 | 0,05672 | 0,08326 | 0,09952 | 0,12452 |  0,1447 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| FPTAS epsilon(0,7)   | 0,00124 |  0,0039 | 0,01848 | 0,02616 | 0,04102 | 0,04878 | 0,06616 | 0,08596 |  0,1089 | 0,12478 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| FPTAS epsilon(0,8)   |  0,0015 | 0,00362 | 0,01638 | 0,02276 | 0,03578 |  0,0433 | 0,06122 | 0,07748 |  0,0959 | 0,11184 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| FPTAS epsilon(0,9)   | 0,00152 | 0,00342 |  0,0151 |  0,021  |  0,0332 | 0,03834 | 0,05506 | 0,06952 | 0,08848 | 0,10494 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| FPTAS epsilon(1,0)   |  0,0014 | 0,00318 | 0,01342 | 0,01888 | 0,03086 | 0,03426 | 0,05094 | 0,06244 | 0,07858 | 0,09422 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| Dynamické dopředný   | 0,00874 | 0,03636 | 0,17572 | 0,22364 | 0,30884 |  0,4351 | 0,59556 | 1,04498 | 1,46048 | 1,29928 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| Dynamické rekurzivní | 0,01176 | 0,08596 |  0,3957 |  0,5004 | 0,68592 | 0,84828 | 1,08704 | 2,14174 | 2,22872 | 2,18642 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| Bound and Branch     | 0,00168 | 0,02312 | 3,04532 | 12,2978 | 93,3477 | 369,923 | 3376,05 | 14654,1 |  112212 |  465856 |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
| Bruteforce           | 0,00072 | 0,05354 |   0,07  |  0,293  |  2,592  |  11,633 |  93,913 | 385,082 |         |         |
+----------------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+</pre>

<p>

<a href="https://edux.fit.cvut.cz/courses/MI-PAA/_detail/student/novakro2/alg_time.png?id=student%3Anovakro2%3A2._homework" class="media" title="student:novakro2:alg_time.png"><img src="./student_novakro2_2._homework_files/alg_time.png" class="media" alt=""></a>
</p>

<p>
Zde je graf porovnání času dynamických algoritmů s různým přístupem implementace podle dekompozice ceny. Je vidět, že rekurzivní je o něco pomalejší.
</p>

<p>
<a href="https://edux.fit.cvut.cz/courses/MI-PAA/_detail/student/novakro2/alg_time_dyn.png?id=student%3Anovakro2%3A2._homework" class="media" title="student:novakro2:alg_time_dyn.png"><img src="./student_novakro2_2._homework_files/alg_time_dyn.png" class="media" alt=""></a>
</p>

</div>
<!-- SECTION "Srovnání času" [6238-11457] -->
<h3><a name="fptas_a_epsilon" id="fptas_a_epsilon">FPTAS a epsilon</a></h3>
<div class="level3">

<p>
U FPTAS algoritmu záleží jakou přesnost chceme. Pokud se podíváme na graf uvidíme, že čím menší přesnost volíme tím algoritmus problém vyřeší rychleji.
</p>

<p>
Tabulka závislosti relativní chyby na epsilon.
</p>
<pre class="code">+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+
| epsilon/n |    4    |    10   |    20    |    22    |      25     |     27     |     30    |    32    |     35    |     37    |
+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+
|    0,1    |  4,1404 | 1,34925 | 0,213884 | 0,115084 | -0,00257859 | -0,0788383 | -0,159806 | -0,21079 | -0,275394 | -0,313126 |
+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+
|    0,2    | 9,41604 | 3,73525 |  1,43772 |  1,23798 |   1,00099   |   0,84763  |  0,684829 |  0,5824  |  0,452393 |  0,376929 |
+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+
|    0,3    | 14,8525 | 6,14896 |  2,67418 |  2,36941 |   2,01031   |   1,77878  |  1,53265  |  1,38002 |  1,18441  |  1,06934  |
+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+
|    0,4    | 20,5737 | 8,61228 |  3,91511 |  3,50881 |   3,02897   |   2,71901  |  2,38798  |  2,18073 |  1,91859  |  1,76628  |
+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+
|    0,5    |  25,955 | 11,0524 |  5,1621  |  4,65198 |   4,05031   |   3,65958  |  3,24112  |  2,98362 |  2,65405  |  2,46255  |
+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+
|    0,6    | 33,4028 | 13,6533 |  6,43215 |  5,81824 |   5,08058   |   4,60424  |  4,10412  |  3,79478 |  3,39744  |  3,16837  |
+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+
|    0,7    | 40,8259 | 16,2113 |  7,7077  |   6,98   |   6,12416   |   5,5738   |  4,98005  |  4,6148  |  4,13838  |  3,87442  |
+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+
|    0,8    | 45,3257 | 18,8474 |  9,00314 |  8,1694  |   7,16053   |   6,54008  |  5,85118  |  5,4299  |  4,89437  |  4,58105  |
+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+
|    0,9    | 52,3869 | 21,3658 |  10,2873 |  9,34756 |   8,21691   |   7,49582  |  6,72005  |  6,25172 |  5,65152  |  5,29042  |
+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+
|    1,0    | 56,1943 | 23,9966 |  11,5698 |  10,5129 |   9,27239   |   8,45317  |  7,58974  |  7,06188 |  6,38912  |  6,00126  |
+-----------+---------+---------+----------+----------+-------------+------------+-----------+----------+-----------+-----------+</pre>

<p>

<a href="https://edux.fit.cvut.cz/courses/MI-PAA/_detail/student/novakro2/alg_time_fptas.png?id=student%3Anovakro2%3A2._homework" class="media" title="student:novakro2:alg_time_fptas.png"><img src="./student_novakro2_2._homework_files/alg_time_fptas.png" class="media" alt=""></a>
</p>

<p>
<a href="https://edux.fit.cvut.cz/courses/MI-PAA/_detail/student/novakro2/alg_fptas_mistake.png?id=student%3Anovakro2%3A2._homework" class="media" title="student:novakro2:alg_fptas_mistake.png"><img src="./student_novakro2_2._homework_files/alg_fptas_mistake.png" class="media" alt=""></a>
</p>

</div>
<!-- SECTION "FPTAS a epsilon" [11458-14807] -->
<h2><a name="zaver" id="zaver">Závěr</a></h2>
<div class="level2">

<p>
Podařilo se téměř úspěšně naimplementovat všechny algoritmy a změřit jejich čas. Několik málo poznatků z měření popíši v následujících málo odstavcích.
</p>

<p>
Docela zarážející je B&amp;B algoritmus, u kterého čas byl horší než u Bruteforce řešení. Podle mého názoru je na vině, rekurzivní řešení oproti Bruteforce, který jsem řešil pomocí for cyklu. Rekurze pak zapříčinila u některých instancí vytvoření celého stromu a následně i jeho projití. Což způsobilo velkou paměťovou náročnost, ale i časovou. Pokud bychom se podívali na jednotlivé časy instancí, viděli bychom, že pouze jedna instance měla o několik řádů čas řešení větší.
</p>

<p>
Při porovnání řešení pomocí přístupů dynamického programování podle dekompozice ceny bylo vidět, že dopředná varianta je rychlejší oproti rekuzivní a to přibližně o 50%.
</p>

<p>
U FPTAS algoritmu jsme mohli vidět, že dost záleží jakou požadovanou přesnost si zvolíme.
</p>
<ul>
<li class="level1"><div class="li">
 Pokud si zvolíme přesnost až moc malou, tak při málo věcech bude reálná chyba dost velká. Ale při hodně věcech chyba reálná chyba menší.
</div></li>
<li class="level1"><div class="li">
 Při malé očekávané přesnosti čas oproti velké očekávané přesnosti je čas o jeden řád menší.
</div></li>
<li class="level1"><div class="li">
 Podle naměřených dat je vidět, že epsilon mezi 0,1 - 0,2 je nejpřesnější.
</div></li>
<li class="level1"><div class="li">
 Při velkém počtu věcí do batohu je reálná chyba o dost menší než očekávaná.
</div></li>
</ul>


<p>

Závěrem chci říct, že jako nejlepší řešení pro problém batohu se mi jeví algoritmus řešený dynamickým programování dopřednou variantou. FPTAS algoritmus je dobrý pouze pro rychlé přibližné řešení. A B&amp;B algoritmus pouze pro instance u kterých víme co je za věci.
</p>

</div>
<!-- SECTION "Závěr" [14808-16575] -->
<h2><a name="ostatni" id="ostatni">Ostatní</a></h2>
<div class="level2">

<p>
Zdrojové kódy <a href="https://edux.fit.cvut.cz/courses/MI-PAA/_media/student/novakro2/novakro2-paa-02.zip" class="media mediafile mf_zip" title="student:novakro2:novakro2-paa-02.zip">novakro2-paa-02.zip</a>.

</p>

</div>
<!-- SECTION "Ostatní" [16576-] --></div>


<div id="gallery__overlay" style="display: none; position: fixed; top: 0px; left: 0px; z-index: 50; width: 100%; height: 100%;"><img id="gallery__loadingImage" src="./student_novakro2_2._homework_files/loading.gif" style="position: relative; cursor: pointer;"></div><div id="gallery__lightbox" style="display: none; position: absolute; z-index: 60;"><img id="gallery__lightboxImage" style="cursor: pointer;"><img id="gallery__actionImage" src="./student_novakro2_2._homework_files/expand.gif" style="display: none; position: absolute; top: 15px; left: 15px; z-index: 70; cursor: pointer;"><img id="gallery__closeButton" src="./student_novakro2_2._homework_files/close.gif" style="display: inline; position: absolute; right: 10px; top: 10px; z-index: 80; cursor: pointer;"><img id="gallery__nextButton" src="./student_novakro2_2._homework_files/next.gif" style="display: inline; position: absolute; right: 10px; bottom: 10px; z-index: 80; cursor: pointer;"><img id="gallery__prevButton" src="./student_novakro2_2._homework_files/prev.gif" style="display: inline; position: absolute; left: 10px; bottom: 10px; z-index: 80; cursor: pointer;"><span id="gallery__lightboxCaption" style="display: none; position: absolute; z-index: 80;"></span></div></body><div></div><div></div></html>